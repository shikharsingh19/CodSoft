import tkinter as tk
from tkinter import messagebox, filedialog

class ToDoListApp:
	def __init__(self, root):
		self.root = root
		self.root.title("To-Do List App")
		self.root.geometry("400x400")

		self.tasks = []

		# Entry field
		self.task_entry = tk.Entry(self.root, font=('Arial', 14))
		self.task_entry.pack(pady=10)

		# Buttons
		tk.Button(self.root, text="Add Task", width=15, command=self.add_task).pack(pady=5)
		tk.Button(self.root, text="Delete Task", width=15, command=self.delete_task).pack(pady=5)
		tk.Button(self.root, text="Save Tasks", width=15, command=self.save_tasks).pack(pady=5)
		tk.Button(self.root, text="Load Tasks", width=15, command=self.load_tasks).pack(pady=5)

		# Task Listbox
		self.task_listbox = tk.Listbox(self.root, width=45, height=10, font=('Arial', 12))
		self.task_listbox.pack(pady=10)

	def add_task(self):
		task = self.task_entry.get()
		if task:
			self.tasks.append(task)
			self.update_listbox()
			self.task_entry.delete(0, tk.END)
		else:
			messagebox.showwarning("Input Error", "Please enter a task.")

	def delete_task(self):
		selected = self.task_listbox.curselection()
		if selected:
			task_index = selected[0]
			del self.tasks[task_index]
			self.update_listbox()
		else:
			messagebox.showwarning("Selection Error", "Please select a task to delete.")

	def save_tasks(self):
		filepath = filedialog.asksaveasfilename(defaultextension=".txt")
		if filepath:
			with open(filepath, "w") as file:
				for task in self.tasks:
					file.write(task + "\n")
			messagebox.showinfo("Success", "Tasks saved successfully!")

	def load_tasks(self):
		filepath = filedialog.askopenfilename(filetypes=[("Text Files", "*.txt")])
		if filepath:
			with open(filepath, "r") as file:
				self.tasks = [line.strip() for line in file.readlines()]
			self.update_listbox()

	def update_listbox(self):
		self.task_listbox.delete(0, tk.END)
		for task in self.tasks:
			self.task_listbox.insert(tk.END, task)


# Main code execution
if __name__ == "__main__":
	root = tk.Tk()
	app = ToDoListApp(root)
	root.mainloop()
